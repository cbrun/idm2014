language: ruby
install:
- gem install asciidoctor
script:
- asciidoctor --version
- ls -alF
- asciidoctor -a icons -a linkcss! -a numbered main.asc -o output/main.html
- ls -al output
- bash update-doc.sh


# Following generated by
#
# travis login --pro
# travis encrypt -r jmbruel/PapyrusFAQ GH_TOKEN=<token generated on gitHub> --add env.global
#env:
#  global:
#    secure: ...
# if everything OK, then deploy on the web
after_success:
#- bash update.sh
- echo -e "Starting to update gitHub\n"
- git config --global user.email "jbruel#travis@gmail.com"
- git config --global user.name "Jean-Michel Bruel"
- git config --global push.default simple
- git clone --quiet https://${GH_TOKEN}@github.com/jmbruel/idm2014.git travis > /dev/null

#go into directory and copy data we're interested in to that directory
#- pwd
#/home/travis/build/jmbruel/basics/
- cp output/*.html travis/output
#- ls -al travis/output
- cd travis/output
- git add *.html
- git commit -m "Travis build $TRAVIS_BUILD_NUMBER pushed to basics repository -- [skip ci]"
- git push -fq origin master  > /dev/null
- echo -e "Done magic with output\n"
